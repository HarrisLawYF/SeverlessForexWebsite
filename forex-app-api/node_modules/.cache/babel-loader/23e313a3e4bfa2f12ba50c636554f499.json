{"ast":null,"code":"import \"source-map-support/register\";\nexport async function calculateMaximumProfit(body) {\n  const promise = new Promise(function (resolve, reject) {\n    var result = buildCurrencyGraph(body);\n\n    if (result.length > 0) {\n      resolve(result);\n    } else {\n      reject(\"Maximum profit not calculated\");\n    }\n  });\n  return promise;\n}\nvar min = -9999999; //This is like a virtual class\n\n/*var edge = {\r\n    id: 0,\r\n    src_bank: 0,\r\n    dest_bank: 0,\r\n    rate: 0,\r\n    extra_cost: 0\r\n};\r\n\r\n//This is like a virtual class\r\nvar graph = {\r\n    edges:[],\r\n    banks: 0,\r\n    rates: 0,\r\n    create: function(){\r\n        for (var i = 0; i < this.rates; i++) {\r\n            // Initialize the graph with empty nodes\r\n            var new_edge = {src_bank:0,dest_bank:0};\r\n            this.edges.push(new_edge);\r\n        }\r\n        return this;\r\n    },\r\n};*/\n\nfunction calculateMoneyWithCurrencyRate(local_currency, rate, extra_cost) {\n  var result = local_currency * rate;\n  result = result * ((100 - extra_cost) / 100);\n  return result;\n}\n\nfunction Forex(graph, src_bank) {\n  var V = graph.banks;\n  var E = graph.rates;\n  var dist = [];\n  var bridges = []; // Step 1: Initialize distances from src to all other vertices as INFINITE negative\n\n  for (var j = 0; j < V; ++j) {\n    dist[j] = min;\n    bridges[j] = [src_bank];\n  } //Start with 1 dollar\n\n\n  dist[src_bank] = 1;\n\n  for (var i = 1; i < 10; ++i) {\n    for (var j = 0; j < E; ++j) {\n      var u = graph.edges[j].src_bank;\n      var v = graph.edges[j].dest_bank;\n      var extra_cost = graph.edges[j].extra_cost;\n      var rate = graph.edges[j].rate;\n      var result = calculateMoneyWithCurrencyRate(dist[u], rate, extra_cost);\n\n      if (dist[u] != min && result > dist[v]) {\n        dist[v] = result;\n        var new_route = bridges[u].slice(0);\n        bridges[v] = new_route;\n        bridges[v].push(v);\n      }\n    }\n  }\n\n  printArr(dist, bridges, V);\n  return {\n    dist,\n    bridges\n  };\n} // A utility function used to print the solution\n\n\nfunction printArr(dist, bridges, V) {\n  console.log(\"Vertex Distance from Source\");\n\n  for (var i = 0; i < V; ++i) {\n    console.log(i + \"\\t\\t\" + dist[i]);\n    console.log(bridges[i]);\n    console.log(\"--------------\");\n  }\n}\n\nfunction buildCurrencyGraph(data) {\n  var new_graph = {\n    edges: [],\n    banks: data.total_currencies,\n    rates: data.total_rates\n  };\n  new_graph = graph.create.call(new_graph);\n\n  for (var count = 0; count < data.total_rates; count++) {\n    new_graph.edges[count].id = count;\n    new_graph.edges[count].src_bank = data.currencies[count].src_id;\n    new_graph.edges[count].dest_bank = data.currencies[count].dest_id;\n    new_graph.edges[count].rate = data.currencies[count].rate;\n    new_graph.edges[count].extra_cost = 0;\n  }\n\n  return Forex(new_graph, 0);\n}","map":{"version":3,"sources":["D:\\Users\\Harris\\Desktop\\Projects\\forex-website\\forex-app-api\\libs\\bellman-ford-lib.js"],"names":["calculateMaximumProfit","body","promise","Promise","resolve","reject","result","buildCurrencyGraph","length","min","calculateMoneyWithCurrencyRate","local_currency","rate","extra_cost","Forex","graph","src_bank","V","banks","E","rates","dist","bridges","j","i","u","edges","v","dest_bank","new_route","slice","push","printArr","console","log","data","new_graph","total_currencies","total_rates","create","call","count","id","currencies","src_id","dest_id"],"mappings":"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","sourcesContent":["export async function calculateMaximumProfit(body) {\r\n    const promise = new Promise(function(resolve, reject) {\r\n        var result = buildCurrencyGraph(body);\r\n        if(result.length > 0){\r\n            resolve(result);\r\n        } else{\r\n            reject(\"Maximum profit not calculated\");\r\n        }\r\n    });\r\n    return promise;\r\n}\r\n\r\n\r\nvar min = -9999999;\r\n\r\n//This is like a virtual class\r\n/*var edge = {\r\n    id: 0,\r\n    src_bank: 0,\r\n    dest_bank: 0,\r\n    rate: 0,\r\n    extra_cost: 0\r\n};\r\n\r\n//This is like a virtual class\r\nvar graph = {\r\n    edges:[],\r\n    banks: 0,\r\n    rates: 0,\r\n    create: function(){\r\n        for (var i = 0; i < this.rates; i++) {\r\n            // Initialize the graph with empty nodes\r\n            var new_edge = {src_bank:0,dest_bank:0};\r\n            this.edges.push(new_edge);\r\n        }\r\n        return this;\r\n    },\r\n};*/\r\n\r\nfunction calculateMoneyWithCurrencyRate(local_currency, rate, extra_cost){\r\n    var result = local_currency * rate;\r\n    result = result*((100-extra_cost)/100);\r\n    return result;\r\n}\r\n\r\nfunction Forex(graph, src_bank)\r\n{\r\n    var V = graph.banks;\r\n    var E = graph.rates;\r\n    var dist = [];\r\n    var bridges = [];\r\n\r\n    // Step 1: Initialize distances from src to all other vertices as INFINITE negative\r\n    for (var j = 0; j < V; ++j){\r\n        dist[j] = min;\r\n        bridges[j] = [src_bank];\r\n    }\r\n\r\n    //Start with 1 dollar\r\n    dist[src_bank] = 1;\r\n\r\n    for (var i = 1; i < 10; ++i) {\r\n        for (var j = 0; j < E; ++j) {\r\n            var u = graph.edges[j].src_bank;\r\n            var v = graph.edges[j].dest_bank;\r\n            var extra_cost = graph.edges[j].extra_cost;\r\n            var rate = graph.edges[j].rate;\r\n            var result = calculateMoneyWithCurrencyRate(dist[u],rate,extra_cost);\r\n            if (dist[u] != min && result > dist[v]){\r\n                dist[v] = result;\r\n                var new_route = bridges[u].slice(0);\r\n                bridges[v] = new_route;\r\n                bridges[v].push(v);\r\n            }\r\n        }\r\n    }\r\n    printArr(dist, bridges, V);\r\n    return {dist, bridges};\r\n}\r\n\r\n// A utility function used to print the solution\r\nfunction printArr(dist, bridges, V)\r\n{\r\n    console.log(\"Vertex Distance from Source\");\r\n    for (var i = 0; i < V; ++i){\r\n        console.log(i + \"\\t\\t\" + dist[i]);\r\n        console.log(bridges[i]);\r\n        console.log(\"--------------\");\r\n    }\r\n\r\n}\r\n\r\nfunction buildCurrencyGraph(data){\r\n    var new_graph = {edges:[],banks:data.total_currencies,rates:data.total_rates};\r\n    new_graph = graph.create.call(new_graph);\r\n    for(var count = 0; count < data.total_rates; count++){\r\n        new_graph.edges[count].id = count;\r\n        new_graph.edges[count].src_bank = data.currencies[count].src_id;\r\n        new_graph.edges[count].dest_bank = data.currencies[count].dest_id;\r\n        new_graph.edges[count].rate = data.currencies[count].rate;\r\n        new_graph.edges[count].extra_cost = 0;\r\n    }\r\n    return Forex(new_graph,0);\r\n}"]},"metadata":{},"sourceType":"module"}